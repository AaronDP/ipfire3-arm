From f1cfbffe3df6ed137c522072adb7ef872592cba4 Mon Sep 17 00:00:00 2001
From: Michael Tremer <michael.tremer@ipfire.org>
Date: Sat, 30 Jun 2012 12:19:52 +0200
Subject: [PATCH 14/16] Fix the download sizes.

Newer versions of libsolv require an unsigned long here.
---
 python/src/solvable.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/python/src/solvable.c b/python/src/solvable.c
index 21ad758..1198df3 100644
--- a/python/src/solvable.c
+++ b/python/src/solvable.c
@@ -492,10 +492,10 @@ PyObject *Solvable_set_downloadsize(SolvableObject *self, PyObject *args) {
 PyObject *Solvable_get_downloadsize(SolvableObject *self) {
 	Solvable *solv = pool_id2solvable(self->_pool, self->_id);
 
-	unsigned int downloadsize = repo_lookup_num(solv->repo, self->_id,
+	unsigned long long downloadsize = repo_lookup_num(solv->repo, self->_id,
 		SOLVABLE_DOWNLOADSIZE, 0);
 
-	return Py_BuildValue("i", downloadsize);
+	return Py_BuildValue("K", downloadsize / 1024);
 }
 
 PyObject *Solvable_set_installsize(SolvableObject *self, PyObject *args) {
-- 
1.7.10.4

